<div class="pageinationBox">
  <ul class="pagination">
    <li class="page-li page-prev no-prev">&lt;</li>
    <li class="page-li page-number" data-number="1">1</li>
    <li class="page-li page-number" data-number="2">2</li>
    <li class="page-li page-number" data-number="3">3</li>
    <li class="page-li page-number" data-number="4">4</li>
    <li class="page-li page-number" data-number="5">5</li>
    <li class="page-li page-next">&gt;</li>
  </ul>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const pagination = document.querySelector(".pagination");
    const prevBtn = document.querySelector(".page-prev");
    const nextBtn = document.querySelector(".page-next");
    const pageItems = document.querySelectorAll(".page-number");
    const totalPages = pageItems.length;

    // 从 URL 获取当前页
    const urlParams = new URLSearchParams(window.location.search);
    let currentPage = parseInt(urlParams.get("page")) || 1;

    // 刷新时高亮当前页
    function setActivePage(page) {
      pageItems.forEach(li => li.classList.remove("page-active"));
      const activeItem = document.querySelector(`.page-number[data-number="${page}"]`);
      if (activeItem) activeItem.classList.add("page-active");

      prevBtn.classList.toggle("no-prev", page === 1);
      nextBtn.classList.toggle("no-next", page === totalPages);
    }

    // 跳转函数
    function goToPage(page) {
      const newUrl = new URL(window.location.href);
      newUrl.searchParams.set("page", page);
      window.location.href = newUrl;  // 整个页面刷新
    }

    // 点击页码
    pageItems.forEach(item => {
      item.addEventListener("click", () => {
        const page = parseInt(item.dataset.number);
        goToPage(page);
      });
    });

    // 点击上一页
    prevBtn.addEventListener("click", () => {
      if (currentPage > 1) {
        goToPage(currentPage - 1);
      }
    });

    // 点击下一页
    nextBtn.addEventListener("click", () => {
      if (currentPage < totalPages) {
        goToPage(currentPage + 1);
      }
    });

    // 初始设置高亮
    setActivePage(currentPage);
  });
</script>

<style>
  .page-li {
    display: inline-block;
    padding: 6px 12px;
    cursor: pointer;
  }
  .page-li.page-active {
    background: #007bff;
    color: #fff;
    border-radius: 4px;
  }
  .page-li.no-prev,
  .page-li.no-next {
    opacity: 0.4;
    pointer-events: none;
  }
</style>
